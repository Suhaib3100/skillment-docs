---
title: "Authentication"
description: "Learn how to authenticate with the Skillment API using JWT tokens"
---

# Authentication

The Skillment API uses JSON Web Tokens (JWT) for authentication. All API requests to protected endpoints must include a valid JWT token in the Authorization header.

## Authentication Flow

<Steps>
  <Step title="Register Organization">
    Create your organization and admin account to get initial credentials
  </Step>
  <Step title="Get JWT Token">
    Use login endpoint to obtain a JWT token
  </Step>
  <Step title="Include Token in Requests">
    Add the token to the Authorization header for all API calls
  </Step>
  <Step title="Refresh When Needed">
    Tokens expire after 7 days - login again to get a new token
  </Step>
</Steps>

## Token Format

All authenticated requests must include the token in this format:

```bash
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

<Warning>
**Keep your tokens secure!** Never expose JWT tokens in client-side code or public repositories. Store them securely and use environment variables for server-side applications.
</Warning>

## Registration

### Organization Registration

Register a new organization and create the first admin user:

<CodeGroup>
```bash cURL
curl -X POST https://api.skillment.in/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@company.com",
    "password": "securePassword123",
    "firstName": "John",
    "lastName": "Doe",
    "phone": "+1234567890",
    "gender": "male",
    "orgName": "my-company",
    "orgType": "technology",
    "orgSize": "50-100",
    "plan": "free",
    "termsAccepted": true,
    "newsletterOptIn": false
  }'
```

```javascript JavaScript
const registerData = {
  email: "admin@company.com",
  password: "securePassword123",
  firstName: "John",
  lastName: "Doe",
  phone: "+1234567890",
  gender: "male",
  orgName: "my-company",
  orgType: "technology",
  orgSize: "50-100",
  plan: "free",
  termsAccepted: true,
  newsletterOptIn: false
};

const response = await fetch('https://api.skillment.in/api/auth/register', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify(registerData)
});

const data = await response.json();
console.log('Registration successful:', data);
```

```python Python
import requests

url = "https://api.skillment.in/api/auth/register"
data = {
    "email": "admin@company.com",
    "password": "securePassword123",
    "firstName": "John",
    "lastName": "Doe",
    "phone": "+1234567890",
    "gender": "male",
    "orgName": "my-company",
    "orgType": "technology",
    "orgSize": "50-100",
    "plan": "free",
    "termsAccepted": True,
    "newsletterOptIn": False
}

response = requests.post(url, json=data)
result = response.json()
print("Registration successful:", result)
```
</CodeGroup>

**Request Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `email` | string | Yes | Valid email address for the admin user |
| `password` | string | Yes | Password (minimum 8 characters) |
| `firstName` | string | Yes | Admin's first name (minimum 2 characters) |
| `lastName` | string | Yes | Admin's last name (minimum 2 characters) |
| `phone` | string | Yes | Phone number (minimum 8 characters) |
| `gender` | string | Yes | Gender |
| `orgName` | string | Yes | Unique organization name (alphanumeric + hyphens only) |
| `orgType` | string | Yes | Type of organization |
| `orgSize` | string | Yes | Organization size category |
| `plan` | string | Yes | Subscription plan: `free` or `elite` |
| `termsAccepted` | boolean | Yes | Must be `true` |
| `newsletterOptIn` | boolean | No | Newsletter subscription preference |

**Response:**
```json
{
  "success": true,
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "user": {
    "id": "user_123",
    "email": "admin@company.com",
    "firstName": "John",
    "lastName": "Doe",
    "orgName": "my-company",
    "role": "admin"
  },
  "organization": {
    "id": "org_456",
    "name": "my-company",
    "plan": "free"
  },
  "redirectUrl": "https://my-company.skillment.in/dashboard"
}
```

## Login

### User Login

Authenticate existing users with their organization:

<CodeGroup>
```bash cURL
curl -X POST https://api.skillment.in/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "admin@company.com",
    "password": "securePassword123",
    "organization": "my-company"
  }'
```

```javascript JavaScript
const loginData = {
  email: "admin@company.com",
  password: "securePassword123",
  organization: "my-company"
};

const response = await fetch('https://api.skillment.in/api/auth/login', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify(loginData)
});

const data = await response.json();
if (data.success) {
  // Store token securely
  localStorage.setItem('skillment_token', data.token);
  console.log('Login successful:', data);
}
```
</CodeGroup>

**Request Parameters:**

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `email` | string | Yes | User's email address |
| `password` | string | Yes | User's password |
| `organization` | string | Yes | Organization name |

### Candidate Login

Authenticate candidates for assessments:

<CodeGroup>
```bash cURL
curl -X POST https://api.skillment.in/api/auth/candidate/login \
  -H "Content-Type: application/json" \
  -d '{
    "email": "candidate@email.com",
    "password": "candidatePassword",
    "assessmentId": "assessment_123"
  }'
```

```javascript JavaScript
const candidateLoginData = {
  email: "candidate@email.com",
  password: "candidatePassword",
  assessmentId: "assessment_123"
};

const response = await fetch('https://api.skillment.in/api/auth/candidate/login', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify(candidateLoginData)
});

const data = await response.json();
console.log('Candidate login successful:', data);
```
</CodeGroup>

## Token Verification

### Verify Token

Check if your current token is valid:

<CodeGroup>
```bash cURL
curl -X GET https://api.skillment.in/api/auth/verify \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

```javascript JavaScript
const verifyToken = async (token) => {
  const response = await fetch('https://api.skillment.in/api/auth/verify', {
    headers: {
      'Authorization': `Bearer ${token}`,
    }
  });
  
  const data = await response.json();
  if (data.success) {
    console.log('Token is valid:', data);
    return data.user;
  } else {
    console.log('Token is invalid');
    return null;
  }
};
```
</CodeGroup>

**Response:**
```json
{
  "success": true,
  "user": {
    "id": "user_123",
    "email": "admin@company.com",
    "firstName": "John",
    "lastName": "Doe",
    "role": "admin"
  },
  "organization": {
    "id": "org_456",
    "name": "my-company",
    "plan": "free"
  }
}
```

## Logout

Invalidate your current session:

<CodeGroup>
```bash cURL
curl -X POST https://api.skillment.in/api/auth/logout \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

```javascript JavaScript
const logout = async (token) => {
  const response = await fetch('https://api.skillment.in/api/auth/logout', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${token}`,
    }
  });
  
  if (response.ok) {
    // Clear stored token
    localStorage.removeItem('skillment_token');
    console.log('Logged out successfully');
  }
};
```
</CodeGroup>

## OTP Authentication

For additional security, some operations may require OTP verification:

### Send OTP

<CodeGroup>
```bash cURL
curl -X POST https://api.skillment.in/api/auth/send-otp \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@company.com"
  }'
```

```javascript JavaScript
const sendOtp = async (email) => {
  const response = await fetch('https://api.skillment.in/api/auth/send-otp', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ email })
  });
  
  const data = await response.json();
  console.log('OTP sent:', data);
};
```
</CodeGroup>

### Verify OTP

<CodeGroup>
```bash cURL
curl -X POST https://api.skillment.in/api/auth/verify-otp \
  -H "Content-Type: application/json" \
  -d '{
    "email": "user@company.com",
    "otp": "123456"
  }'
```

```javascript JavaScript
const verifyOtp = async (email, otp) => {
  const response = await fetch('https://api.skillment.in/api/auth/verify-otp', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ email, otp })
  });
  
  const data = await response.json();
  if (data.success) {
    console.log('OTP verified successfully');
    return true;
  }
  return false;
};
```
</CodeGroup>

## Best Practices

<AccordionGroup>
  <Accordion title="Token Storage" icon="shield">
    **Server-side**: Store tokens in secure environment variables or encrypted databases
    
    **Client-side**: Use secure storage mechanisms:
    - HTTPOnly cookies for web applications
    - Secure keystores for mobile applications
    - Never store in localStorage for production apps
  </Accordion>
  
  <Accordion title="Token Refresh" icon="rotate">
    Implement automatic token refresh in your applications:
    
    ```javascript
    const checkTokenExpiry = (token) => {
      const payload = JSON.parse(atob(token.split('.')[1]));
      const expiry = payload.exp * 1000; // Convert to milliseconds
      const now = Date.now();
      
      // Refresh if token expires in next 5 minutes
      return (expiry - now) < 5 * 60 * 1000;
    };
    ```
  </Accordion>
  
  <Accordion title="Error Handling" icon="triangle-exclamation">
    Always handle authentication errors gracefully:
    
    ```javascript
    const apiCall = async (endpoint, options = {}) => {
      const response = await fetch(endpoint, {
        ...options,
        headers: {
          'Authorization': `Bearer ${token}`,
          ...options.headers,
        },
      });
      
      if (response.status === 401) {
        // Token expired or invalid
        redirectToLogin();
        return;
      }
      
      return response.json();
    };
    ```
  </Accordion>
</AccordionGroup>

## Organization Name Validation

Before registering, you can check if an organization name is available:

<CodeGroup>
```bash cURL
curl -X GET https://api.skillment.in/api/organizations/validate/my-company-name
```

```javascript JavaScript
const checkOrgNameAvailability = async (orgName) => {
  const response = await fetch(`https://api.skillment.in/api/organizations/validate/${orgName}`);
  const data = await response.json();
  
  if (data.available) {
    console.log('Organization name is available');
    return true;
  } else {
    console.log('Organization name is taken');
    return false;
  }
};
```
</CodeGroup>

## Error Codes

Common authentication error codes:

| Code | Description | Solution |
|------|-------------|----------|
| `INVALID_CREDENTIALS` | Wrong email/password | Check credentials and try again |
| `USER_NOT_FOUND` | User doesn't exist | Verify email and organization |
| `ORG_NOT_FOUND` | Organization doesn't exist | Check organization name |
| `TOKEN_EXPIRED` | JWT token has expired | Login again to get new token |
| `TOKEN_INVALID` | Malformed or invalid token | Login again to get new token |
| `ORG_NAME_TAKEN` | Organization name already exists | Choose a different name |
| `VALIDATION_ERROR` | Invalid request data | Check required fields and formats |

## Security Features

<CardGroup cols={2}>
  <Card title="JWT Tokens" icon="key">
    Secure, stateless authentication with automatic expiration
  </Card>
  <Card title="OTP Verification" icon="shield-check">
    Two-factor authentication for sensitive operations
  </Card>
  <Card title="Organization Isolation" icon="building">
    Complete data separation between organizations
  </Card>
  <Card title="Role-based Access" icon="users">
    Granular permissions based on user roles
  </Card>
</CardGroup>

<Note>
**Development vs Production**: Use different organization names for development and production environments to keep your data separate and secure.
</Note>